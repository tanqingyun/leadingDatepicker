/*!
 * leading-datepicker
 * 
 * Version: 1.0.1 - 2016-12-05T06:50:37.877Z
 * License: 
 */
!function(e,n){"use strict";var t;t="object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("angular"),require("moment")):"function"==typeof define&&define.amd?define(["angular","moment"],n):n(e.angular,e.moment)}(this,function(e,n){var t=!1;t=!!navigator.userAgent.match(/MSIE 8.0/);var i=e.version?e.version.major:0,a=e.version?e.version.minor:0;if(1!=i)return alert("angular version not support"),void 0;var s=e.module("ldDatePicker",[]);s.constant("datePickerConfig",{template:"templates/ld-datepicker.html",view:"month",views:["year","month","date","hours","minutes"],momentNames:{year:"year",month:"month",date:"day",hours:"hours",minutes:"minutes"},viewConfig:{year:["years","isSameYear"],month:["months","isSameMonth"],hours:["hours","isSameHour"],minutes:["minutes","isSameMinutes"]},step:5}),s.filter("mFormat",function(){return function(e,t,i){return e?(n.isMoment(e)||(e=n(e)),i?n.tz(e,i).format(t):e.format(t)):void 0}}),s.factory("datePickerUtils",function(){var t,i=function(e,i,a,s,r,l){var o=Date.UTC(0|e,0|i,0|a,0|s,0|r,0|l);return t?n.tz(o,t):n(o)};return{getVisibleMinutes:function(e,n){var t,a,s=e.year(),r=e.month(),l=e.date(),o=e.hours(),c=e.utcOffset()/60,d=[];for(a=0;60>a;a+=n)t=i(s,r,l,o-c,a),d.push(t);return d},getVisibleWeeks:function(e){e=n(e);var t=e.year(),i=e.month();e.date(1);var a=e.day();0===a?e.date(-6):e.date(1-a);for(var s=[];s.length<6&&!(e.year()===t&&e.month()>i);)s.push(this.getDaysOfWeek(e)),e.add(7,"d");return s},getVisibleYears:function(e){var t=n(e),a=t.year();t.year(a-a%10),a=t.year();for(var s,r,l=t.utcOffset()/60,o=[],c=0;12>c;c++)s=i(a,0,1,0-l),r=s.utcOffset()/60,r!==l&&(s=i(a,0,1,0-r),l=r),o.push(s),a++;return o},getDaysOfWeek:function(e){e=e?e:t?n.tz(t).day(0):n().day(0);for(var a,s,r=e.year(),l=e.month(),o=e.date(),c=[],d=e.utcOffset()/60,u=0;7>u;u++)a=i(r,l,o,0-d,0,!1),s=a.utcOffset()/60,s!==d&&(a=i(r,l,o,0-s,0,!1)),c.push(a),o++;return c},getVisibleMonths:function(e){for(var n,t,a=e.year(),s=e.utcOffset()/60,r=[],l=0;12>l;l++)n=i(a,l,1,0-s,0,!1),t=n.utcOffset()/60,t!==s&&(n=i(a,l,1,0-t,0,!1)),r.push(n);return r},getVisibleHours:function(e){var n,t,a,s=e.year(),r=e.month(),l=e.date(),o=[],c=e.utcOffset()/60;for(n=0;24>n;n++)t=i(s,r,l,n-c,0,!1),a=t.utcOffset()/60,a!==c&&(t=i(s,r,l,n-a,0,!1)),o.push(t);return o},isAfter:function(e,n){return e&&e.unix()>=n.unix()},isBefore:function(e,n){return e.unix()<=n.unix()},isSameYear:function(e,n){return e&&e.year()===n.year()},isSameMonth:function(e,n){return this.isSameYear(e,n)&&e.month()===n.month()},isSameDay:function(e,n){return this.isSameMonth(e,n)&&e.date()===n.date()},isSameHour:function(e,n){return this.isSameDay(e,n)&&e.hours()===n.hours()},isSameMinutes:function(e,n){return this.isSameHour(e,n)&&e.minutes()===n.minutes()},setParams:function(e){t=e},findFunction:function(n,t){var i=n;do if(i=i.$parent,e.isFunction(i[t]))return i[t];while(i.$parent);return!1},findParam:function(e,n){var t=e;do if(t=t.$parent,-1!=n.indexOf(".")){if(t.$eval(n))return t.$eval(n)}else if(t[n])return t[n];while(t.$parent);return!1},createMoment:function(e){return t?n.tz(e,t):n.isMoment(e)?n.unix(e.unix()):n(e)},getDate:function(e,n,t){var i=!1;return n[t]&&(i=this.createMoment(n[t]),i.isValid()||(i=this.findParam(e,n[t]),i&&(i=this.createMoment(i)))),i},eventIsForPicker:function(n,t){return e.isArray(n)&&n.indexOf(t)>-1||n===t}}});var r="ng-pristine",l="ng-dirty";s.constant("dateTimeConfig",{template:function(e,n){return"<div "+(n?'id="'+n+'" ':"")+'date-picker="'+e.ngModel+'" '+(e.view?'view="'+e.view+'" ':"")+(e.maxView?'max-view="'+e.maxView+'" ':"")+(e.maxDate?'max-date="'+e.maxDate+'" ':"")+(e.autoClose?'auto-close="'+e.autoClose+'" ':"")+(e.template?'template="'+e.template+'" ':"")+(e.minView?'min-view="'+e.minView+'" ':"")+(e.minDate?'min-date="'+e.minDate+'" ':"")+(e.partial?'partial="'+e.partial+'" ':"")+(e.step?'step="'+e.step+'" ':"")+(e.onSetDate?'date-change="'+e.onSetDate+'" ':"")+(e.ngModel?'ng-model="'+e.ngModel+'" ':"")+(e.timezone?'timezone="'+e.timezone+'" ':"")+'class="date-picker-date-time"></div>'},format:"YYYY-MM-DD",views:["date","year","month","hours","minutes"],autoClose:!0,position:"relative"}),s.directive("dateTimeAppend",function(){return{link:function(e,n){n.bind("click",function(){n.find("input")[0].focus()})}}}),s.directive("datePicker",["datePickerConfig","datePickerUtils",function(t,i){return{require:"?ngModel",template:'<div ng-include="template"></div>',scope:{model:"=datePicker"},link:function(a,s,r,l){function o(){a.views=t.views.concat(),a.view=r.view||t.view,a.views=a.views.slice(a.views.indexOf(r.maxView||"year"),a.views.indexOf(r.minView||"minutes")+1),(1===a.views.length||-1===a.views.indexOf(a.view))&&(a.view=a.views[0])}function c(e){return i.getDate(a,r,e)}function d(e){e&&(a.model=e,l&&l.$setViewValue(e)),a.$emit("setDate",a.model,a.view),a.callbackOnSetDate&&a.callbackOnSetDate(r.datePicker,a.date)}function u(){var e=a.view;i.setParams(k),a.model&&!w&&(a.date=y(a.model),w=!1);var n=a.date;switch(e){case"year":a.years=i.getVisibleYears(n);break;case"month":a.months=i.getVisibleMonths(n);break;case"date":a.weekdays=a.weekdays||i.getDaysOfWeek(),a.weeks=i.getVisibleWeeks(n);break;case"hours":a.hours=i.getVisibleHours(n);break;case"minutes":a.minutes=i.getVisibleMinutes(n,$)}f()}function m(){return"date"!==a.view?a.view:a.date?a.date.month():null}function f(){b&&b.isAfter(a.date)&&(a.date=b),M&&M.isBefore(a.date)&&(a.date=M);var e,n,s=a.view,r=a.date,l=[],o="";if(i.setParams(k),"date"===s){var c,d=a.weeks;for(e=0;e<d.length;e++)for(c=d[e],l.push([]),n=0;n<c.length;n++)o="",i.isSameDay(r,c[n])&&(o+="active"),g(c[n],s)&&(o+=" now"),c[n].month()!==r.month()&&(o+=c[n].month()>r.month()?" next-month":" prev-month"),p(c[n])||(o+=" un-show"),l[e].push(o)}else{var u=t.viewConfig[s],m=a[u[0]],f=u[1];for(e=0;e<m.length;e++)o="",i[f](r,m[e])&&(o+="active"),g(m[e],s)&&(o+=" now"),p(m[e])||(o+=" un-show"),l.push(o)}a.classes=l}function p(e){var n=!0;return b&&b.isAfter(e)&&(n=h(b,e)),M&&M.isBefore(e)&&(n&=h(M,e)),n}function h(e,n){return e.isSame(n,t.momentNames[a.view])?!0:!1}function v(e){return b&&b.isAfter(e)?b:M&&M.isBefore(e)?M:e}function g(e,n){var t=!0;switch(n){case"minutes":t&=~~(C.minutes()/$)===~~(e.minutes()/$);case"hours":t&=C.hours()===e.hours();case"date":t&=C.date()===e.date();case"month":t&=C.month()===e.month();case"year":t&=C.year()===e.year()}return t}a.dateClassType=function(e){return e?-1!=e.indexOf("un-show")?"un-show":-1!=e.indexOf("prev-month")?"prev-month":-1!=e.indexOf("next-month")?"next-month":"else":"else"},i.setParams(r.timezone);var w=!1,k=a.tz=r.timezone,y=i.createMoment,x=i.eventIsForPicker,$=parseInt(r.step||t.step,10),D=!!r.partial,b=c("minDate"),M=c("maxDate"),V=s[0].id,C=a.now=y(),S=a.date=y(a.model||C),O="true"===r.autoClose;a.model||S.minute(Math.ceil(S.minute()/$)*$).second(0),a.template=r.template||t.template,a.watchDirectChanges=void 0!==r.watchDirectChanges,a.callbackOnSetDate=r.dateChange?i.findFunction(a,r.dateChange):void 0,o(),a.setView=function(e){-1!==a.views.indexOf(e)&&(a.view=e)},a.selectNonMonthDate=function(e){return r.disabled?!1:(h(a.date,e)&&(e=a.date),(e=v(e))?(a.date=e,a.setView("date"),void 0):!1)},a.selectDate=function(e){if(r.disabled)return!1;if(h(a.date,e)&&(e=a.date),e=v(e),!e)return!1;a.date=e;var n=a.views[a.views.indexOf(a.view)+1];(!n||D||a.model)&&d(e),n?a.setView(n):O?(s.addClass("hidden"),a.$emit("hidePicker")):f()},a.$watch(m,u),a.watchDirectChanges&&a.$watch("model",function(){w=!1,u()}),a.next=function(e){var t=n(a.date);switch(e=e||1,a.view){case"year":case"month":t.year(t.year()+e);break;case"date":t.month(t.month()+e);break;case"hours":case"minutes":t.hours(t.hours()+e)}t=v(t),t&&(a.date=t,d(t),w=!0,u())},a.prev=function(e){return a.next(-e||-1)},V&&a.$on("pickerUpdate",function(n,t,i){if(x(t,V)){var a=!1,s=!1;e.isDefined(i.minDate)&&(b=i.minDate?i.minDate:!1,s=!0),e.isDefined(i.maxDate)&&(M=i.maxDate?i.maxDate:!1,s=!0),e.isDefined(i.minView)&&(r.minView=i.minView,a=!0),e.isDefined(i.maxView)&&(r.maxView=i.maxView,a=!0),r.view=i.view||r.view,a&&o(),s&&u()}})}}}]),s.directive("dateTime",["$compile","$document","$filter","dateTimeConfig","$parse","datePickerUtils",function(i,s,o,c,d,u){var m=s.find("body"),f=o("mFormat");return{require:"ngModel",scope:!0,link:function(s,o,p,h){function v(e){return f(e,V,B)}function g(e){return e?e.length===V.length?(h.$setValidity("format",!0),n(e)):(h.$setValidity("format",!1),void 0):(h.$setValidity("format",!0),null)}function w(e){return e?e.length===V.length?n(e):void 0:null}function k(t){e.isDate(t)?t=n(t):e.isNumber(t)?t=n(t):e.isString(t)&&(t=n(t)),I=t,p.minDate=t?t.format():t,H=n.isMoment(t)}function y(t){e.isDate(t)?t=n(t):e.isNumber(t)?t=n(t):e.isString(t)&&(t=n(t)),A=t,p.maxDate=t?t.format():t,U=n.isMoment(t)}function x(){M=c.template(p)}function $(e){e.stopPropagation(),h.$pristine&&(h.$dirty=!0,h.$pristine=!1,o.removeClass(r).addClass(l),C&&C.$setDirty(),h.$render())}function D(){t&&E||(z&&(z.remove(),z=null),q&&(q.remove(),q=null))}function b(){if(!z){if(z=i(M)(s),s.$digest(),j||(s.$on("setDate",function(e,n,t){$(e),W&&W(p.ngModel,n),P&&S[S.length-1]===t&&D()}),s.$on("hidePicker",function(){o.triggerHandler("blur")}),s.$on("$destroy",D),j=!0),"absolute"===T){var n=e.extend(o.offset(),{height:o[0].offsetHeight}),a=n.height||o[0].offsetHeight;z.css({top:n.top+a+5+"px",left:n.left+"px",display:"block",position:T}),m.append(z)}else q=e.element("<div date-picker-wrapper></div>"),o[0].parentElement.insertBefore(q[0],o[0]),q.append(z),z.css({top:o[0].offsetHeight+5+"px",display:"block"});z.bind("mousedown",function(e){E=!0,e.preventDefault()}),t&&z.bind("mouseleave",function(){E=!1,o.focus()})}}var M,V=p.format||c.format,C=o.inheritedData("$formController"),S=d(p.views)(s)||c.views.concat(),O=p.view||S[0],Y=S.indexOf(O),P=p.autoClose?d(p.autoClose)(s):c.autoClose,z=null,F=o[0].id,T=p.position||c.position,q=null,I=null,H=null,A=null,U=null,B=p.timezone||!1,N=u.eventIsForPicker,W=null,j=!1,E=!1;-1===Y&&S.splice(Y,1),S.unshift(O),h.$formatters.push(v),a>0&&2>=a?h.$parsers.unshift(g):a>2&&h.$parsers.unshift(w),s.$watch(p.maxDate,function(n,t){e.equals(n,t)||s.$broadcast("pickerUpdate",F,{maxDate:n})}),s.$watch(p.minDate,function(n,t){e.equals(n,t)||s.$broadcast("pickerUpdate",F,{minDate:n})}),e.isDefined(p.minDate)&&(k(u.findParam(s,p.minDate)),a>0&&2>=a?h.$parsers.push(function(e){return e?(H?n.isMoment(e)&&(I.isSame(e)||I.isBefore(e)):!0)?(h.$setValidity("min",!0),e):(h.$setValidity("min",!1),void 0):(h.$setValidity("min",!0),null)}):a>2&&(h.$validators.min=function(e){return e?H?n.isMoment(e)&&(I.isSame(e)||I.isBefore(e)):!0:!0})),e.isDefined(p.maxDate)&&(y(u.findParam(s,p.maxDate)),a>0&&2>=a?h.$parsers.push(function(e){return e?(U?n.isMoment(e)&&(A.isSame(e)||A.isAfter(e)):!0)?(h.$setValidity("max",!0),e):(h.$setValidity("max",!1),void 0):(h.$setValidity("max",!0),null)}):a>2&&(h.$validators.max=function(e){return e?U?n.isMoment(e)&&(A.isSame(e)||A.isAfter(e)):!0:!0})),e.isDefined(p.dateChange)&&(W=u.findFunction(s,p.dateChange)),F&&s.$on("pickerUpdate",function(n,t,i){if(N(t,F))if(z);else{var s=!1;e.isDefined(i.minDate)&&(k(i.minDate),s=!0),e.isDefined(i.maxDate)&&(y(i.maxDate),s=!0),e.isDefined(i.minView)&&(p.minView=i.minView),e.isDefined(i.maxView)&&(p.maxView=i.maxView),p.view=i.view||p.view,s&&(a>0&&2>=a?h.$render():a>2&&h.$validate()),e.isDefined(i.format)&&(V=p.format=i.format||c.format,h.$modelValue=-1),x()}}),o.bind("focus",b),o.bind("blur",D),x()}}}]),s.run(["$templateCache",function(e){e.put("templates/ld-datepicker.html",'<div ng-switch="view" class="datepicker-container">\r\n<div ng-switch-when="year" class="datepicker-panel datepicker-panel-years">\r\n<ul class="datepicker-panel-header">\r\n<li class="prev" ng-click="prev(10)"><i>&lsaquo;</i></li>\r\n<li class="current" ng-bind="years[0].year()+\' - \'+years[years.length-1].year()"></li>\r\n<li class="next" ng-click="next(10)"><i>&rsaquo;</i></li>\r\n</ul>\r\n<ul class="datepicker-panel-content years">\r\n<li class="year" ng-repeat-start="year in years" ng-class="classes[$index]" ng-if="dateClassType(classes[$index]) == \'else\'" ng-click="selectDate(year)" ng-bind="year.year()"></li>\r\n<li class="year" ng-repeat-end ng-class="classes[$index]" ng-if="dateClassType(classes[$index]) == \'un-show\'"></li>\r\n</ul>\r\n</div>\r\n<div ng-switch-when="month" class="datepicker-panel datepicker-panel-months">\r\n<ul class="datepicker-panel-header">\r\n<li class="prev" ng-click="prev()"><i>&lsaquo;</i></li>\r\n<li class="current" ng-click="setView(\'year\')" ng-bind="date|mFormat:\'YYYY\':tz"></li>\r\n<li class="next" ng-click="next()"><i>&rsaquo;</i></li>\r\n</ul>\r\n<ul class="datepicker-panel-content months">\r\n<li class="month" ng-repeat="month in months" ng-class="classes[$index]" ng-if="dateClassType(classes[$index]) == \'else\'" ng-click="selectDate(month)" ng-bind="month|mFormat:\'MMM\':tz"></li>\r\n<li class="month" ng-repeat-end ng-class="classes[$index]" ng-if="dateClassType(classes[$index]) == \'un-show\'"></li>\r\n</ul>\r\n</div>\r\n<div ng-switch-when="date" class="datepicker-panel datepicker-panel-dates">\r\n<ul class="datepicker-panel-header">\r\n<li class="prev" ng-click="prev()"><i>&lsaquo;</i></li>\r\n<li class="current" ng-click="setView(\'month\')" ng-bind="date|mFormat:\'MMMM YYYY\':tz"></li>\r\n<li class="next" ng-click="next()"><i>&rsaquo;</i></li>\r\n</ul>\r\n<ul class="datepicker-panel-header weeks">\r\n<li class="week" ng-repeat="day in weekdays" ng-bind="day|mFormat:\'ddd\':tz"></li>\r\n</ul>\r\n<ul class="datepicker-panel-content days" ng-repeat="week in weeks" ng-init="$weekIndex = $index">\r\n<li class="day" ng-repeat-start="day in week" ng-class="classes[$weekIndex][$index]" ng-if="dateClassType(classes[$weekIndex][$index]) == \'un-show\'"></li>\r\n<li class="day" ng-class="classes[$weekIndex][$index]" ng-bind="day|mFormat:\'DD\':tz" ng-if="dateClassType(classes[$weekIndex][$index]) == \'prev-month\'" ng-click="selectNonMonthDate(day)"></li>\r\n<li class="day" ng-class="classes[$weekIndex][$index]" ng-bind="day|mFormat:\'DD\':tz" ng-if="dateClassType(classes[$weekIndex][$index]) == \'next-month\'" ng-click="selectNonMonthDate(day)"></li>\r\n<li class="day" ng-repeat-end ng-class="classes[$weekIndex][$index]" ng-bind="day|mFormat:\'DD\':tz" ng-if="dateClassType(classes[$weekIndex][$index]) == \'else\'" ng-click="selectDate(day)"></li>\r\n</ul>\r\n</div>\r\n<div ng-switch-when="hours" class="datepicker-panel datepicker-panel-hours">\r\n<ul class="datepicker-panel-header">\r\n<li class="prev" ng-click="prev(24)"><i>&lsaquo;</i></li>\r\n<li class="current" ng-click="setView(\'date\')" ng-bind="date|mFormat:\'DD MMMM YYYY\':tz"></li>\r\n<li class="next" ng-click="next(24)"><i>&rsaquo;</i></li>\r\n</ul>\r\n<ul class="datepicker-panel-content hours">\r\n<li class="hour" ng-repeat="hour in hours" ng-class="classes[$index]" ng-if="dateClassType(classes[$index]) == \'else\'" ng-click="selectDate(hour)" ng-bind="hour|mFormat:\'HH:mm\':tz"></li>\r\n<li class="hour" ng-repeat-end ng-class="classes[$index]" ng-if="dateClassType(classes[$index]) == \'un-show\'"></li>\r\n</ul>\r\n</div>\r\n<div ng-switch-when="minutes" class="datepicker-panel datepicker-panel-minutes">\r\n<ul class="datepicker-panel-header">\r\n<li class="prev" ng-click="prev()"><i>&lsaquo;</i></li>\r\n<li class="current" ng-click="setView(\'hours\')" ng-bind="date|mFormat:\'DD MMMM YYYY\':tz"></li>\r\n<li class="next" ng-click="next()"><i>&rsaquo;</i></li>\r\n</ul>\r\n<ul class="datepicker-panel-content minutes">\r\n<li class="minute" ng-repeat="minute in minutes" ng-class="classes[$index]" ng-if="dateClassType(classes[$index]) == \'else\'" ng-click="selectDate(minute)" ng-bind="minute|mFormat:\'HH:mm\':tz"></li>\r\n<li class="minute" ng-repeat="minute in minutes" ng-class="classes[$index]" ng-if="dateClassType(classes[$index]) == \'un-show\'"></li>\r\n</ul>\r\n</div>\r\n</div>')}])});